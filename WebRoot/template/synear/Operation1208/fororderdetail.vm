<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<link rel="stylesheet" type="text/css" href="../../../js/style.css">
<link rel="stylesheet" type="text/css" href="../../../js/spellCode.css">
<script language="javascript">
function ShowDate(idText){
	 var state="dialogHeight: 300px; dialogWidth: 240px; dialogTop: 200px; dialogLeft: 300px; "+             "edge: Raised;  center: Yes; help: No; resizable: Yes; status: No;";
	 var reValue=window.showModalDialog('../../../js/date.html?OpenForm',"myDate",state);
	 if(reValue==null) 
	   ;
	 else
	   idText.value=reValue;
	 }
var undefined;		
function uniteTable(thistab,colLength){
  var rn=thistab.rows.length;//取得行数   
  var rowspann=0;   
  for(j=colLength-1;j>=0;j--){//从第0列开始，合并多少列   
    for(i=rn-1;i>0;i--){//从倒数第一行开始往上检查   
      if(thistab.rows[i].cells[j].innerText==thistab.rows[i-1].cells[j].innerText&&thistab.rows[i].cells[j].colSpan==thistab.rows[i-1].cells[j].colSpan){//与上面一行比较，如果两行相等就合计当前行的合并行数，并删除当前行。   
	rowspann+=thistab.rows[i].cells[j].rowSpan;;
	thistab.rows[i].deleteCell(j);   
      }else{   
	thistab.rows[i].cells[j].rowSpan+=rowspann;//如果不等就完成当前相同数据的合并。   
	rowspann=0;   
      }   
    }   
    //检测无表头的表   
    if(i==0&&rowspann>0){   
      thistab.rows[i].cells[j].rowSpan+=rowspann;//如果不等就完成当前相同数据的合并。   
      rowspann=0;   
    }   
  }   
}  
</script>
<title>订单跟踪</title>
</head>

<body onload="uniteTable(document.all.thistable,2)">
<form name="thisfrom" method="post" action="fororderdetail.aspx">
<table class="datatable">
  <tr class="trcolor">
    <td colspan="4" align="left">订单跟踪</td>
  </tr>
  <tr class="trcolor">
    <td>备货时间:</td>
    <td align="left"><input type="text" name="bhdata1" value="$!form_bhdata1" onclick="ShowDate(bhdata1)"/>-<input type="text" name="bhdate2" value="$!form_bhdate2" onclick="ShowDate(bhdate2)"/></td>
    <td>备货单号:</td>
    <td align="left"><input type="text" name="bhorder" value="$!form_bhorder"/></td>
  </tr>
  <tr class="trcolor">
    <td>订单日期:</td>
    <td align="left"><input type="text" name="cddate1" value="$!form_cddate1" onclick="ShowDate(cddate1)"/>-<input type="text" name="cddate2" value="$!form_cddate2" onclick="ShowDate(cddate2)"/></td>
    <td>订单号:</td>
    <td align="left"><input type="text" name="order" value="$!form_order" /></td>
  </tr>
  <tr class="trcolor">
    <td>供应商:</td>
    <td align="left"><input type="text" name="custname" value="$!form_custname"/></td>
    <td align="left">&nbsp;</td>
    <td><input type="submit" name="button" value="查&nbsp;&nbsp;询" /></td>  
  </tr>
</table>
</form>
<table class="datatable" id="thistable">
  <tr class="trcolor">
    <td>序号</td>
    <td>备货单号</td>
    <td>供应商名称</td>
    <td>产品编码</td>
    <td>产品名称</td>
    <td>订单数量</td>
    <td>订单号</td>
    <td>订单日期</td>
    <td>到货地点</td>
    <td>备货数量</td> 
    <td>备货日期</td>
    <td>备货备注</td>
  </tr>
  #set($i=0)
  #foreach($!m in $selBHorder)
  <tr class="trcolor">
    <td>$i</td>
    <td>$!m.OPERORDERCODE</td>
    <td>$!m.CUSTNAME</td>
    <td>$!m.INVCODE</td>
    <td>$!m.INVNAME</td>
    <td>$!m.NORDERNUM</td>
    <td>$!m.VORDERCODE</td>
    <td>$!m.TMAKETIME</td>
    <td>$!m.VDEF4</td>
    <td>$!m.NNUMBER</td>  
    <td>$!m.PREPAREDATE</td>
    <td>$!m.REMARK</td>
  </tr>
  #set($i=$i+1)
  #end
</table>
</body>
</html>